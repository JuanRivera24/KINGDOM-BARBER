<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visor Interactivo | Proyecto Kingdom Barber</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-primary: #c5a880;
            --color-primary-light: #eaddc7;
            --color-primary-dark: #b39160;
            --color-bg: #f8f7f4;
            --color-text: #333;
            --color-sidebar-bg: #1e1b1a;
            --color-sidebar-text: #ffffff;
            --font-display: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
        }

        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-body);
            background-color: var(--color-bg);
            color: var(--color-text);
        }

        .nav-link { transition: all .3s ease; position: relative; }
        .nav-link.active { background-color: var(--color-primary); color: var(--color-sidebar-bg); font-weight: 600; }
        .nav-link:not(.active):hover { background-color: rgba(255, 255, 255, 0.1); }

        .content-section { display: none; animation: fadeIn .6s ease-in-out; }
        .content-section.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .tab.active { border-bottom: 3px solid var(--color-primary); color: var(--color-primary-dark); font-weight: 600; }

        .flow-step { transition: all .3s ease-in-out; border-left-width: 4px; border-left-color: transparent; }
        .flow-step.active { background-color: white; transform: scale(1.02); box-shadow: 0 4px 20px rgba(0, 0, 0, .08); border-left-color: var(--color-primary); }
        .flow-step:not(.active) { opacity: 0.7; }

        .slides-container { position: relative; overflow: hidden; height: 650px; }
        .slide { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; transform: translateX(50px); z-index: 1; }
        .slide.active { display: flex; flex-direction: column; justify-content: center; opacity: 1; transform: translateX(0); z-index: 10; }
        .slide.exiting { transform: translateX(-50px); opacity: 0; }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #e0e0e0; }
        ::-webkit-scrollbar-thumb { background: var(--color-primary); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--color-primary-dark); }

        .animated-crown { display: inline-block; animation: bounce-crown 2s infinite ease-in-out; }
        @keyframes bounce-crown {
            0%, 100% { transform: translateY(0) rotate(0); }
            25% { transform: translateY(-5px) rotate(-5deg); }
            75% { transform: translateY(-3px) rotate(5deg); }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: .001ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: .001ms !important;
                scroll-behavior: auto !important;
            }
        }
    </style>
</head>
<body class="flex h-screen overflow-hidden">

<header class="w-72 bg-sidebar-bg text-sidebar-text flex flex-col p-6 shadow-2xl flex-shrink-0">
    <div class="text-center mb-12">
        <h1 class="text-3xl font-bold text-amber-400" style="font-family: var(--font-display);">
            <span class="animated-crown mr-2">üëë</span>Kingdom Barber
        </h1>
        <p class="text-sm text-gray-400 mt-1">Visor Interactivo del Proyecto</p>
    </div>
    <nav id="main-nav" class="flex flex-col space-y-2" aria-label="Navegaci√≥n principal"></nav>
    <div class="mt-auto text-center text-xs text-gray-500">
        <p class="font-semibold">Alejandro Urrego ‚Ä¢ Andr√©s Vallejo ‚Ä¢ Juan M. Rivera</p>
        <p class="mt-1">Instituci√≥n T√©cnica CESDE &copy; 2025</p>
    </div>
</header>

<main id="main-content" class="flex-1 overflow-y-auto p-8 md:p-12"></main>

<script>
document.addEventListener('DOMContentLoaded', function () {
    
    const app = {
        elements: {
            mainNav: document.getElementById('main-nav'),
            mainContent: document.getElementById('main-content'),
        },

        sectionsData: [
            { id: 'overview', title: 'Visi√≥n General', icon: 'üè†', active: true },
            { id: 'slideshow', title: 'Presentaci√≥n Detallada', icon: 'üì∫' },
            { id: 'architecture', title: 'Arquitectura', icon: 'üèóÔ∏è' },
            { id: 'data-flow', title: 'Flujo de Datos', icon: '‚ÜîÔ∏è' },
            { id: 'modules', title: 'M√≥dulos del Sistema', icon: 'üß©' },
            { id: 'tech-stack', title: 'Stack Tecnol√≥gico', icon: 'üíª' },
            { id: 'objectives', title: 'Objetivos', icon: 'üéØ' },
            { id: 'conclusions', title: 'Conclusiones', icon: 'üìú' },
            { id: 'glossary', title: 'Glosario T√©cnico', icon: 'üìñ' }
        ],

        slidesData: [
            // ... (El contenido de las diapositivas no necesita cambios)
             {
                id: 'slide-1',
                bgColor: 'bg-amber-50',
                title: '1. El Problema: La Gesti√≥n Tradicional es Ineficiente',
                content: `<p class="text-xl text-gray-700 mb-6">La gesti√≥n tradicional de barber√≠as enfrenta desaf√≠os en la era digital que limitan su crecimiento y no cumplen con las expectativas de los clientes modernos, quienes buscan comodidad y personalizaci√≥n.</p><ul class="space-y-3 text-lg"><li class="flex items-start"><span class="mr-3 text-red-500">‚ùå</span><div><strong>Procesos Manuales:</strong> La dependencia de agendas en papel o llamadas telef√≥nicas aumenta el riesgo de errores y reduce la eficiencia.</div></li><li class="flex items-start"><span class="mr-3 text-red-500">‚ùå</span><div><strong>Comunicaci√≥n Ineficiente:</strong> Falta de canales directos para recordatorios autom√°ticos, promociones y feedback del cliente.</div></li><li class="flex items-start"><span class="mr-3 text-red-500">‚ùå</span><div><strong>Carencia de Datos:</strong> Imposibilidad de analizar el rendimiento, identificar servicios populares o entender patrones de clientes para tomar decisiones estrat√©gicas.</div></li></ul><p class="text-xl text-gray-800 mt-8 p-4 bg-green-100 border-l-4 border-green-500 rounded-r-lg"><strong>Nuestra Soluci√≥n:</strong> Kingdom Barber, un ecosistema digital que transforma la gesti√≥n, enriquece la interacci√≥n y potencia el negocio con herramientas de an√°lisis de datos e IA.</p>`
            },
            {
                id: 'slide-2',
                bgColor: 'bg-white',
                title: '2. La Soluci√≥n: Un Ecosistema de Servicios Desacoplados',
                content: `<p class="text-xl text-gray-700 mb-8">El proyecto se basa en una arquitectura moderna y escalable, donde cada sistema es independiente pero funciona de manera sin√©rgica, comunic√°ndose a trav√©s de una API Central.</p><div class="flex flex-col md:flex-row justify-around items-center space-y-6 md:space-y-0 md:space-x-6"><div class="text-center p-6 bg-blue-50 rounded-lg w-full md:w-1/3 shadow-sm"><span class="text-5xl">üåê</span><h4 class="font-bold mt-2 text-lg">Plataforma Web (Cliente)</h4><p class="text-sm text-gray-500">(Next.js)</p><p class="mt-2">Interfaz para que los clientes agenden citas y exploren servicios.</p></div><div class="text-5xl text-amber-500 font-light transform md:-rotate-90">‚Üë‚Üì</div><div class="text-center p-6 bg-amber-50 rounded-lg w-full md:w-1/3 shadow-lg border-2 border-amber-500"><span class="text-5xl">üß†</span><h4 class="font-bold mt-2 text-lg">API CENTRAL (El Cerebro)</h4><p class="text-sm text-gray-500">(Node.js)</p><p class="mt-2">√önica fuente de verdad. Gestiona toda la l√≥gica de negocio y los datos.</p></div><div class="text-5xl text-amber-500 font-light transform md:-rotate-90">‚Üë‚Üì</div><div class="text-center p-6 bg-green-50 rounded-lg w-full md:w-1/3 shadow-sm"><span class="text-5xl">üìä</span><h4 class="font-bold mt-2 text-lg">Panel de Gesti√≥n (Admin)</h4><p class="text-sm text-gray-500">(Python)</p><p class="mt-2">Herramienta para an√°lisis de datos, visualizaci√≥n y asistente de IA.</p></div></div><p class="text-center mt-8 text-gray-600 text-lg">Esta separaci√≥n permite que cada componente evolucione de forma independiente, garantizando flexibilidad y mantenibilidad.</p>`
            },
            {
                id: 'slide-3',
                bgColor: 'bg-slate-50',
                title: '3. M√≥dulo Clave: La API Central (Node.js + Express)',
                content: `<p class="text-xl text-gray-700 mb-6">Es el <strong>coraz√≥n del sistema</strong>. Este componente centraliza toda la l√≥gica de negocio y act√∫a como la √∫nica fuente de verdad para los datos.</p><ul class="space-y-4 text-lg text-gray-700"><li><strong class="text-amber-700">API RESTful:</strong> Expone endpoints para operaciones CRUD (Crear, Leer, Actualizar, Eliminar) sobre todas las entidades: clientes, barberos, citas, servicios y galer√≠a.</li><li><strong class="text-amber-700">Persistencia de Datos:</strong> Utiliza <strong>archivos JSON</strong> como sistema de base de datos, lo que simplifica la configuraci√≥n y la portabilidad del proyecto. Cada archivo <code>.json</code> act√∫a como una tabla.</li><li><strong class="text-amber-700">Middleware Especializado:</strong> Integra librer√≠as como <strong>CORS</strong> para permitir la comunicaci√≥n entre dominios y <strong>Multer</strong> para gestionar eficientemente la subida de im√°genes.</li></ul><div class="mt-6 p-4 bg-gray-200 rounded-lg text-gray-800"><code class="text-sm"><strong>Dise√±o Ligero y Eficiente:</strong> Al estar construido sobre Node.js, es ideal para gestionar las operaciones de entrada/salida (I/O) de manera as√≠ncrona, haci√©ndolo perfecto para una API que recibe m√∫ltiples peticiones.</code></div>`
            },
            {
                id: 'slide-4',
                bgColor: 'bg-blue-50',
                title: '4. M√≥dulo Cliente: Plataforma Web (PI_WEB2)',
                content: `<p class="text-xl text-gray-700 mb-6">Construido con <strong>Next.js (React + TypeScript)</strong>, es la cara visible del proyecto y el punto de contacto directo con clientes y barberos. <strong>Es un cliente puro que consume la API Central.</strong></p><div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-lg"><div><h4 class="font-semibold text-blue-700 mb-2">Para Clientes:</h4><ul class="list-disc list-inside space-y-2"><li>Sistema de reservas avanzado con calendario interactivo.</li><li>Exploraci√≥n de servicios y sedes con mapa de geolocalizaci√≥n.</li><li>Autenticaci√≥n segura para gestionar perfil y citas.</li></ul></div><div><h4 class="font-semibold text-blue-700 mb-2">Para Barberos:</h4><ul class="list-disc list-inside space-y-2"><li>Dashboard para gestionar su agenda personal.</li><li>Visualizaci√≥n de citas por d√≠a, semana o mes.</li><li>Galer√≠a para subir y gestionar un portafolio de trabajos.</li></ul></div></div><p class="mt-8 text-lg p-4 bg-blue-100 rounded-lg">El uso de <strong>TypeScript</strong> asegura un c√≥digo m√°s robusto, mientras que <strong>Tailwind CSS</strong> permite un dise√±o moderno y responsivo. Toda la informaci√≥n se obtiene de la API de Node.js.</p>`
            },
            {
                id: 'slide-5',
                bgColor: 'bg-green-50',
                title: '5. M√≥dulo de Inteligencia: Panel de Gesti√≥n (PI_NTP)',
                content: `<p class="text-xl text-gray-700 mb-6">Una potente herramienta estrat√©gica desarrollada con <strong>Python y Streamlit</strong>, dise√±ada para que los administradores tomen decisiones basadas en datos. <strong>Tambi√©n consume la API Central.</strong></p><ul class="space-y-4 text-lg"><li><strong class="text-green-700">Dashboard Interactivo:</strong> Ofrece KPIs (Ingresos, Citas) y filtros para analizar datos en tiempo real.</li><li><strong class="text-green-700">Gesti√≥n y Consulta:</strong> Permite consultar el historial completo de citas con filtros avanzados por sede, barbero, cliente y fecha.</li><li><strong class="text-green-700">Asistente de IA (Gemini):</strong> El componente m√°s innovador, capaz de generar reportes en PDF, analizar datos usando lenguaje natural, crear textos para marketing y detectar oportunidades de negocio.</li></ul>`
            },
            {
                id: 'slide-6',
                bgColor: 'bg-red-50',
                title: '6. M√≥dulo Adicional: Aplicaci√≥n Independiente (PI_MOVIL2)',
                content: `<p class="text-xl text-gray-700 mb-6">Este es un <strong>proyecto autocontenido</strong> que funciona de manera completamente <strong>aut√≥noma</strong> y demuestra un enfoque de desarrollo full-stack tradicional.</p><ul class="space-y-4 text-lg text-gray-700"><li><strong class="text-red-700">Backend Propio:</strong> Desarrollado con <strong>Spring Boot (Java)</strong>, implementa su propia API REST, l√≥gica de negocio y capa de persistencia con Spring Data JPA.</li><li><strong class="text-red-700">Frontend Integrado:</strong> La interfaz de usuario est√° construida con <strong>Vanilla JavaScript, HTML y CSS</strong>, y se sirve directamente desde el backend de Spring Boot.</li><li><strong class="text-red-700">No se integra con la API Central:</strong> Este m√≥dulo es un sistema independiente y no se comunica con la API de Node.js ni con los otros componentes del ecosistema principal.</li></ul><div class="mt-6 p-4 bg-red-100 rounded-lg text-gray-800"><code class="text-sm"><strong>Prop√≥sito:</strong> Sirve como una demostraci√≥n de habilidades en el stack de Java, implementando portales funcionales para clientes y barberos en una arquitectura monol√≠tica cl√°sica.</code></div>`
            }
        ],

        // --- M√âTODOS DE LA APLICACI√ìN ---

        init() {
            this.renderLayoutAndContent();
            this.attachNavListeners();
            this.initInteractiveComponents();
        },

        getSectionHTML(sectionId) {
            const slidesHTML = this.slidesData.map((slide, index) => `
                <div id="${slide.id}" class="slide p-8 md:p-12 ${slide.bgColor} rounded-xl ${index === 0 ? 'active' : ''}">
                    <h3 class="text-3xl font-bold mb-4 text-stone-800">${slide.title}</h3>
                    ${slide.content}
                </div>`).join('');
            
            const glossaryTerms = [
                 { term: 'API Central', def: 'El componente principal (Node.js) que act√∫a como cerebro, centralizando toda la l√≥gica de negocio y sirviendo datos a las dem√°s aplicaciones del ecosistema.' }, { term: 'API RESTful', def: 'Un estilo de arquitectura para dise√±ar APIs que utiliza m√©todos HTTP est√°ndar (GET, POST, PUT, DELETE). Act√∫a como el lenguaje com√∫n entre la API Central y los clientes.' }, { term: 'Arquitectura de Servicios Desacoplados', def: 'Estrategia donde cada parte del sistema es independiente (API, Web, Panel) y se comunica a trav√©s de interfaces bien definidas. Facilita el mantenimiento y la escalabilidad.' }, { term: 'CORS (Cross-Origin Resource Sharing)', def: 'Un mecanismo que permite a los recursos de una p√°gina web ser solicitados desde un dominio diferente. Es el middleware que permite al frontend en `localhost:3000` comunicarse con la API en `localhost:3001`.' }, { term: 'CRUD', def: 'Acr√≥nimo de Create, Read, Update y Delete (Crear, Leer, Actualizar, Borrar). Son las cuatro operaciones b√°sicas que se pueden realizar sobre los datos.' }, { term: 'Endpoint', def: 'Una URL espec√≠fica en la API a la que una aplicaci√≥n cliente puede enviar una petici√≥n para realizar una acci√≥n, como obtener la lista de barberos (`/barberos`) o crear una cita (`/nuevas_citas`).' }, { term: 'Express.js', def: 'Un framework minimalista y flexible para Node.js que proporciona un conjunto de caracter√≠sticas robustas para aplicaciones web y m√≥viles, utilizado para construir la API Central.' }, { term: 'Frontend', def: 'La parte visible e interactiva de la aplicaci√≥n con la que los usuarios interact√∫an. En este proyecto hay dos: la plataforma web (Next.js) y el panel de gesti√≥n (Streamlit).' }, { term: 'Gemini', def: 'El modelo de lenguaje grande (LLM) de Google integrado en el panel de gesti√≥n para potenciar el Asistente de IA, permitiendo an√°lisis con lenguaje natural, generaci√≥n de reportes y m√°s.' }, { term: 'JSON (JavaScript Object Notation)', def: 'Un formato de texto ligero para el intercambio de datos. Es el "idioma" que hablan los clientes y la API. En la API Central, tambi√©n se usa como formato de almacenamiento de base de datos.' }, { term: 'Multer', def: 'Un middleware de Node.js para manejar datos `multipart/form-data`, que se utiliza principalmente para la subida de archivos, como las im√°genes de la galer√≠a.' }, { term: 'Next.js', def: 'Un framework de React que a√±ade funcionalidades clave como el renderizado del lado del servidor (SSR), optimizando el rendimiento y el SEO de la plataforma web.' }, { term: 'Node.js', def: 'Un entorno de ejecuci√≥n para JavaScript del lado del servidor. Permite ejecutar JavaScript fuera del navegador, siendo la base tecnol√≥gica de la API Central.' }, { term: 'Pandas', def: 'Una biblioteca de Python fundamental para el an√°lisis de datos. Se usa en el panel de gesti√≥n para manipular y procesar los datos obtenidos de la API.' }, { term: 'Spring Boot', def: 'Un framework que simplifica la creaci√≥n de aplicaciones Java. Se utiliza para construir el backend del proyecto independiente PI_MOVIL2.' }, { term: 'Streamlit', def: 'Un framework de Python que permite crear aplicaciones web interactivas para ciencia de datos con muy poco c√≥digo. Es la base del Panel de Gesti√≥n (PI_NTP).' }, { term: 'Tailwind CSS', def: 'Un framework de CSS "utility-first" que proporciona clases de bajo nivel para construir dise√±os directamente en el HTML, acelerando el desarrollo de la interfaz de la plataforma web.' }, { term: 'TypeScript', def: 'Un superconjunto de JavaScript que a√±ade tipado est√°tico. Ayuda a detectar errores durante el desarrollo y mejora la escalabilidad del c√≥digo del frontend en Next.js.' }, { term: 'Vanilla JS', def: 'T√©rmino que se refiere al uso de JavaScript puro, sin librer√≠as o frameworks adicionales. Se us√≥ en el frontend del proyecto independiente PI_MOVIL2.' }
            ].sort((a, b) => a.term.localeCompare(b.term));
            const glossaryHTML = glossaryTerms.map(item => `<div class="border-b pb-4"><h3 class="font-bold text-xl text-amber-700">${item.term}</h3><p>${item.def}</p></div>`).join('');

            const contentMap = {
                overview: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Visi√≥n General del Proyecto</h2><div class="bg-white p-8 rounded-2xl shadow-lg space-y-8"><div><h3 class="text-2xl font-semibold mb-3 text-amber-600">1. Resumen del Proyecto</h3><p class="text-lg leading-relaxed text-gray-700"><strong>Kingdom Barber</strong> nace como una <strong>plataforma digital integral</strong>, dise√±ada para transformar y modernizar la gesti√≥n de barber√≠as. Su objetivo es ofrecer una soluci√≥n robusta que simplifique la administraci√≥n de citas, enriquezca la interacci√≥n con el cliente y proporcione herramientas avanzadas para la toma de decisiones estrat√©gicas.</p></div><div class="border-t pt-8"><h3 class="text-2xl font-semibold mb-3 text-amber-600">2. Planteamiento del Problema</h3><p class="text-lg leading-relaxed text-gray-700">La gesti√≥n tradicional de barber√≠as enfrenta desaf√≠os en la era digital, como la dependencia de procesos manuales, una comunicaci√≥n ineficiente y la falta de an√°lisis de datos. Esto resulta en una menor eficiencia operativa y una experiencia que no cumple con las expectativas actuales de los clientes, quienes buscan <strong>comodidad, seguridad y personalizaci√≥n</strong>.</p></div><div class="border-t pt-8"><h3 class="text-2xl font-semibold mb-4 text-amber-600">3. Soluci√≥n Propuesta</h3><p class="text-lg leading-relaxed text-gray-700">Kingdom Barber aborda estos desaf√≠os mediante un <strong>ecosistema de aplicaciones</strong> que funcionan de manera sin√©rgica: una <strong>API Central (Node.js)</strong> que act√∫a como el cerebro, una <strong>Plataforma Web para clientes (Next.js)</strong> y un <strong>Panel de Gesti√≥n y An√°lisis (Python/Streamlit)</strong>. Esta soluci√≥n empodera a los due√±os del negocio con herramientas de an√°lisis de datos e IA para identificar patrones, detectar oportunidades y automatizar tareas de marketing.</p></div></div>`,
                slideshow: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Presentaci√≥n Detallada del Proyecto</h2><div class="bg-white p-6 rounded-2xl shadow-lg"><div class="slides-container" aria-live="polite">${slidesHTML}</div><div class="flex justify-between items-center mt-6"><button id="slideshow-prev" class="bg-stone-800 text-white px-5 py-2 rounded-lg hover:bg-black transition disabled:opacity-50" aria-label="Diapositiva anterior">&larr; Anterior</button><span id="slideshow-counter" class="font-semibold text-lg text-gray-700">Diapositiva 1 de ${this.slidesData.length}</span><button id="slideshow-next" class="bg-amber-500 text-white px-5 py-2 rounded-lg hover:bg-amber-600 transition" aria-label="Siguiente diapositiva">Siguiente &rarr;</button></div></div>`,
                architecture: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Dise√±o de la Arquitectura General</h2><div class="bg-white p-8 rounded-2xl shadow-lg"><p class="text-lg mb-8 text-gray-700 leading-relaxed">El proyecto est√° dise√±ado bajo una <strong>arquitectura de servicios desacoplados</strong>, donde cada componente tiene una responsabilidad √∫nica. El n√∫cleo del sistema es la API Central, que centraliza toda la l√≥gica de negocio y los datos, sirviendo a m√∫ltiples clientes frontend de forma independiente.</p><div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-amber-500 hover:shadow-xl transition-shadow"><h3 class="font-bold text-xl mb-2 text-amber-600">API Central (N√∫cleo del Sistema)</h3><p class="text-base">Componente central en <strong>Node.js y Express</strong>. Act√∫a como √∫nica fuente de verdad, gestionando los datos (usuarios, citas, servicios) a trav√©s de endpoints RESTful y utilizando archivos JSON para la persistencia.</p></div><div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-blue-400 hover:shadow-xl transition-shadow"><h3 class="font-bold text-xl mb-2 text-blue-600">Frontend (Plataforma del Cliente - PI_WEB2)</h3><p class="text-base">Capa de presentaci√≥n desarrollada con <strong>Next.js (React y TypeScript)</strong>. Es un cliente puro que consume los datos de la API Central para ofrecer una experiencia de reserva fluida.</p></div><div class="bg-white p-6 rounded-xl shadow-md border-l-4 border-green-400 hover:shadow-xl transition-shadow"><h3 class="font-bold text-xl mb-2 text-green-600">Panel de Administraci√≥n (Inteligencia - PI_NTP)</h3><p class="text-base">Aplicaci√≥n web independiente en <strong>Python y Streamlit</strong>. Se conecta a la misma API Central para realizar an√°lisis, generar visualizaciones e integrar un asistente de IA (Gemini).</p></div></div></div>`,
                'data-flow': `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Flujo de Datos: Creaci√≥n de una Cita</h2><div class="bg-white p-8 rounded-2xl shadow-lg"><p class="text-lg mb-6 text-gray-700">Este es un ejemplo del flujo de datos cliente-servidor al agendar una cita en el nuevo ecosistema. Navega paso a paso para ver c√≥mo los componentes interact√∫an a trav√©s de la API Central.</p><div class="flex justify-between items-center mb-8"><button id="prev-step" class="bg-stone-800 text-white px-5 py-2 rounded-lg hover:bg-black transition disabled:opacity-50"> &larr; Anterior</button><span id="step-counter" class="font-semibold text-lg text-gray-700"></span><button id="next-step" class="bg-amber-500 text-white px-5 py-2 rounded-lg hover:bg-amber-600 transition">Siguiente &rarr;</button></div><div id="flow-steps-container" class="space-y-4"></div></div>`,
                modules: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">An√°lisis Detallado de M√≥dulos</h2><div class="bg-white p-8 rounded-2xl shadow-lg"><div id="tabs" class="flex border-b border-gray-200 mb-6" role="tablist" aria-label="M√≥dulos"><button class="tab py-3 px-6 text-gray-500 focus:outline-none text-lg active" data-target="module-api" role="tab" aria-selected="true">üß† API Central (Node.js)</button><button class="tab py-3 px-6 text-gray-500 focus:outline-none text-lg" data-target="module-frontend" role="tab" aria-selected="false">üåê Plataforma Web (PI_WEB2)</button><button class="tab py-3 px-6 text-gray-500 focus:outline-none text-lg" data-target="module-analytics" role="tab" aria-selected="false">üìä Panel de Gesti√≥n (PI_NTP)</button><button class="tab py-3 px-6 text-gray-500 focus:outline-none text-lg" data-target="module-independent" role="tab" aria-selected="false">üîß App Independiente (PI_MOVIL2)</button></div><div id="tab-content" aria-live="polite" class="min-h-[300px]"></div></div>`,
                'tech-stack': `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Stack Tecnol√≥gico Consolidado</h2><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8"><div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-shadow"><h3 class="font-bold text-2xl mb-4 border-b-2 pb-2 border-amber-500 text-amber-600">Backend (API Central)</h3><ul class="space-y-3 text-lg"><li><strong>Node.js & Express.js:</strong> Para construir una API RESTful ligera, r√°pida y escalable.</li><li><strong>JSON Files:</strong> Como sistema de almacenamiento de datos simple y portable.</li></ul></div><div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-shadow"><h3 class="font-bold text-2xl mb-4 border-b-2 pb-2 border-blue-400 text-blue-600">Frontend (Cliente)</h3><ul class="space-y-3 text-lg"><li><strong>Next.js, React & TypeScript:</strong> Para una interfaz r√°pida, interactiva y de c√≥digo robusto.</li><li><strong>Tailwind CSS:</strong> Para un dise√±o moderno, personalizable y totalmente responsivo.</li></ul></div><div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-shadow"><h3 class="font-bold text-2xl mb-4 border-b-2 pb-2 border-green-400 text-green-600">An√°lisis de Datos</h3><ul class="space-y-3 text-lg"><li><strong>Python & Streamlit:</strong> Para crear el panel interactivo de an√°lisis de forma √°gil.</li><li><strong>Pandas & Plotly:</strong> Para manipulaci√≥n y visualizaci√≥n de datos.</li><li><strong>Google Gemini:</strong> Como motor del asistente de IA.</li></ul></div><div class="bg-white p-8 rounded-2xl shadow-lg hover:shadow-2xl transition-shadow"><h3 class="font-bold text-2xl mb-4 border-b-2 pb-2 border-red-500 text-red-600">App Independiente</h3><ul class="space-y-3 text-lg"><li><strong>Java & Spring Boot:</strong> Para el backend autocontenido y la API REST.</li><li><strong>VanillaJS:</strong> Para una interfaz de usuario fundamental y sin frameworks.</li></ul></div></div>`,
                objectives: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Objetivos del Proyecto</h2><div class="bg-white p-8 rounded-2xl shadow-lg mb-8"><h3 class="font-semibold text-2xl mb-3 text-amber-600">Objetivo General</h3><p class="text-lg leading-relaxed">Mejorar la eficiencia operativa de las barber√≠as mediante la digitalizaci√≥n de la gesti√≥n de reservas y la comunicaci√≥n con los clientes, ofreciendo una experiencia personalizada y aumentando la satisfacci√≥n del cliente.</p></div><div class="bg-white p-8 rounded-2xl shadow-lg"><h3 class="font-semibold text-2xl mb-6 text-amber-600">Objetivos Espec√≠ficos</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6"><div class="flex items-start"><span class="mr-4 text-2xl text-amber-500">üõ°Ô∏è</span><div><strong class="block text-gray-800 text-lg">Seguridad y Acceso:</strong> Desarrollar un sistema de autenticaci√≥n robusto para proteger los datos de usuarios y administradores.</div></div><div class="flex items-start"><span class="mr-4 text-2xl text-amber-500">üß≠</span><div><strong class="block text-gray-800 text-lg">Usabilidad y Navegaci√≥n:</strong> Crear interfaces de usuario intuitivas y consistentes en todas las plataformas para garantizar una experiencia fluida.</div></div><div class="flex items-start"><span class="mr-4 text-2xl text-amber-500">üìÖ</span><div><strong class="block text-gray-800 text-lg">Gesti√≥n de Reservas:</strong> Implementar un sistema de citas completo con calendarios interactivos, notificaciones y gesti√≥n de disponibilidad.</div></div><div class="flex items-start"><span class="mr-4 text-2xl text-amber-500">üë§</span><div><strong class="block text-gray-800 text-lg">Experiencia Personalizada:</strong> Ofrecer opciones de personalizaci√≥n y un cat√°logo detallado de servicios para que los clientes puedan elegir seg√∫n sus preferencias.</div></div></div></div>`,
                conclusions: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Conclusiones y Lecciones Aprendidas</h2><div class="bg-white p-8 rounded-2xl shadow-lg space-y-6 text-lg text-gray-700"><p>La implementaci√≥n del ecosistema Kingdom Barber ha sido un √©xito, sentando las bases para una soluci√≥n tecnol√≥gica funcional, moderna y escalable. Las lecciones aprendidas durante el proceso han sido fundamentales.</p><div class="space-y-4"><div class="p-4 bg-gray-50 rounded-lg border-l-4 border-amber-400"><strong class="text-gray-800">Evoluci√≥n a Arquitectura Desacoplada:</strong> La decisi√≥n de migrar de un modelo monol√≠tico a uno de servicios con una API Central en Node.js fue clave. Permiti√≥ que los equipos de frontend (Next.js y Streamlit) trabajaran en paralelo y evolucionaran de forma independiente.</div><div class="p-4 bg-gray-50 rounded-lg border-l-4 border-amber-400"><strong class="text-gray-800">Importancia de los Contratos de API:</strong> La definici√≥n clara de los endpoints, las peticiones y las respuestas (el "contrato" de la API) fue fundamental para una integraci√≥n sin fricciones entre el backend y los frontends.</div><div class="p-4 bg-gray-50 rounded-lg border-l-4 border-amber-400"><strong class="text-gray-800">Lecciones Aprendidas:</strong> Aprendimos a no subestimar el tiempo necesario para la integraci√≥n entre servicios y la importancia cr√≠tica de mantener una documentaci√≥n de API clara, completa y siempre actualizada para facilitar el trabajo de los equipos consumidores.</div></div><p class="pt-6 border-t border-gray-200 font-semibold text-gray-800">El proyecto ha entregado una soluci√≥n robusta y sienta una base s√≥lida para futuras expansiones, como la integraci√≥n de pasarelas de pago o nuevos m√≥dulos de anal√≠tica avanzada.</p></div>`,
                glossary: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Glosario T√©cnico Extendido</h2><div class="bg-white p-8 rounded-2xl shadow-lg"><div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 text-lg">${glossaryHTML}</div></div>`
            };
            return contentMap[sectionId] || '';
        },

        renderLayoutAndContent() {
            this.sectionsData.forEach(section => {
                // 1. Crear y a√±adir el enlace de navegaci√≥n
                const navLink = document.createElement('a');
                navLink.href = `#${section.id}`;
                navLink.className = `nav-link px-4 py-3 rounded-lg text-left text-base ${section.active ? 'active' : ''}`;
                navLink.innerHTML = `<span class="mr-3 text-lg">${section.icon}</span>${section.title}`;
                this.elements.mainNav.appendChild(navLink);

                // 2. Crear el contenedor de la secci√≥n, llenarlo con su HTML y a√±adirlo al DOM
                const sectionContainer = document.createElement('section');
                sectionContainer.id = section.id;
                sectionContainer.className = `content-section ${section.active ? 'active' : ''}`;
                sectionContainer.innerHTML = this.getSectionHTML(section.id);
                this.elements.mainContent.appendChild(sectionContainer);
            });
        },
        
        attachNavListeners() {
            this.elements.mainNav.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('href').substring(1);

                    this.elements.mainNav.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');

                    this.elements.mainContent.querySelectorAll('.content-section').forEach(section => {
                        section.classList.toggle('active', section.id === targetId);
                    });
                    this.elements.mainContent.scrollTop = 0;
                });
            });
        },

        initInteractiveComponents() {
            this.initSlideshow();
            this.initDataFlow();
            this.initModulesTabs();
        },

        initSlideshow() {
            const container = document.getElementById('slideshow');
            if (!container) return;
            let currentIndex = 0;
            const slides = container.querySelectorAll('.slide');
            const prevBtn = container.querySelector('#slideshow-prev');
            const nextBtn = container.querySelector('#slideshow-next');
            const counter = container.querySelector('#slideshow-counter');
            if (!slides.length || !prevBtn || !nextBtn || !counter) return;

            const updateButtons = () => {
                prevBtn.disabled = currentIndex === 0;
                nextBtn.disabled = currentIndex === slides.length - 1;
            };

            const showSlide = (index) => {
                const currentSlide = slides[currentIndex];
                const nextSlide = slides[index];
                if (currentSlide) {
                    currentSlide.classList.add('exiting');
                    currentSlide.addEventListener('transitionend', () => {
                        currentSlide.classList.remove('active', 'exiting');
                    }, { once: true });
                }
                if (nextSlide) nextSlide.classList.add('active');
                currentIndex = index;
                counter.textContent = `Diapositiva ${currentIndex + 1} de ${slides.length}`;
                updateButtons();
            };
            prevBtn.addEventListener('click', () => currentIndex > 0 && showSlide(currentIndex - 1));
            nextBtn.addEventListener('click', () => currentIndex < slides.length - 1 && showSlide(currentIndex + 1));
            updateButtons();
        },

        initDataFlow() {
            const container = document.getElementById('data-flow');
            if (!container) return;
            let currentStep = 0;
            const steps = [
                { title: '1. Cliente (Frontend - PI_WEB2)', desc: 'El usuario rellena el formulario de reserva en la interfaz de Next.js. El frontend empaqueta los datos en un objeto JSON.' }, { title: '2. Petici√≥n HTTP (POST)', desc: 'El frontend env√≠a una petici√≥n POST al endpoint <code>/nuevas_citas</code> de la API Central (<code>http://localhost:3001</code>) usando la Fetch API.' }, { title: '3. L√≥gica (API Central)', desc: 'El servidor Express en Node.js recibe la petici√≥n, valida los datos y utiliza los m√≥dulos de Node para leer y escribir en el archivo <code>nuevas_citas.json</code>.' }, { title: '4. Persistencia (Base de Datos)', desc: 'Los nuevos datos de la cita se guardan en el archivo JSON, que act√∫a como la base de datos del sistema.' }, { title: '5. Respuesta de la API', desc: 'La API devuelve una respuesta JSON al frontend con un c√≥digo de estado <code>201 Created</code>, confirmando que la cita se ha creado exitosamente.' }, { title: '6. Actualizaci√≥n de UI', desc: 'El frontend de Next.js recibe la confirmaci√≥n, actualiza su estado interno (React) y la interfaz se re-renderiza para mostrar la cita reci√©n agendada.' }
            ];
            const stepsContainer = container.querySelector('#flow-steps-container');
            const prevBtn = container.querySelector('#prev-step');
            const nextBtn = container.querySelector('#next-step');
            const counter = container.querySelector('#step-counter');
            if (!stepsContainer || !prevBtn || !nextBtn || !counter) return;

            steps.forEach((step) => {
                stepsContainer.innerHTML += `<div class="flow-step p-6 rounded-lg bg-gray-50 border-l-4"><h3 class="font-bold text-xl mb-2">${step.title}</h3><p class="text-gray-600 text-lg">${step.desc}</p></div>`;
            });

            const stepElements = stepsContainer.querySelectorAll('.flow-step');
            const updateView = () => {
                stepElements.forEach((el, index) => el.classList.toggle('active', index === currentStep));
                prevBtn.disabled = currentStep === 0;
                nextBtn.disabled = currentStep === steps.length - 1;
                counter.textContent = `Paso ${currentStep + 1} de ${steps.length}`;
            };
            prevBtn.addEventListener('click', () => { if (currentStep > 0) { currentStep--; updateView(); } });
            nextBtn.addEventListener('click', () => { if (currentStep < steps.length - 1) { currentStep++; updateView(); } });
            updateView();
        },

        initModulesTabs() {
            const container = document.getElementById('modules');
            if (!container) return;
            const tabs = container.querySelectorAll('.tab');
            const contentContainer = container.querySelector('#tab-content');
            if(!tabs.length || !contentContainer) return;
            
            const tabContents = {
                'module-api': `<h3 class="font-bold text-2xl mb-4 text-amber-700">API Central (Node.js + Express)</h3><p class="text-lg mb-4">Es el coraz√≥n y cerebro del sistema. Gestiona toda la l√≥gica, los datos (en archivos JSON) y la seguridad a trav√©s de una API REST.</p><h4 class="font-semibold text-xl mb-2">Funcionalidades Principales:</h4><ul class="list-disc list-inside space-y-2 text-lg"><li><strong>Endpoints RESTful:</strong> Ofrece rutas para operaciones CRUD de clientes, barberos, sedes, servicios, citas y galer√≠a.</li><li><strong>Gesti√≥n de Archivos:</strong> Maneja la subida de im√°genes para la galer√≠a utilizando el middleware Multer.</li><li><strong>Servidor de Est√°ticos:</strong> Sirve las im√°genes de la galer√≠a para que puedan ser consumidas directamente por los clientes frontend.</li></ul>`,
                'module-frontend': `<h3 class="font-bold text-2xl mb-4 text-blue-700">Plataforma Web para Clientes (PI_WEB2)</h3><p class="text-lg mb-4">La cara visible del proyecto, construida con <strong>Next.js, React y TypeScript</strong> para una experiencia de usuario excepcional. Consume la API Central para todas sus operaciones.</p><h4 class="font-semibold text-xl mb-2">Funcionalidades Principales:</h4><ul class="list-disc list-inside space-y-2 text-lg"><li><strong>Sistema de Reservas Avanzado:</strong> Un flujo completo que consume la API para agendar, modificar y cancelar citas.</li><li><strong>Exploraci√≥n de Servicios y Sedes:</strong> Muestra cat√°logos detallados obtenidos desde la API.</li><li><strong>Panel para Barberos:</strong> Un dashboard exclusivo donde los barberos gestionan su agenda y su galer√≠a de trabajos.</li></ul>`,
                'module-analytics': `<h3 class="font-bold text-2xl mb-4 text-green-700">Panel de Gesti√≥n y An√°lisis (PI_NTP)</h3><p class="text-lg mb-4">Herramienta estrat√©gica en <strong>Python con Streamlit</strong>, dise√±ada para el an√°lisis de datos y la administraci√≥n, consumiendo la API Central.</p><h4 class="font-semibold text-xl mb-2">Funcionalidades Principales:</h4><ul class="list-disc list-inside space-y-2 text-lg"><li><strong>Dashboard Interactivo:</strong> Ofrece KPIs y filtros en tiempo real para una visi√≥n profunda del rendimiento del negocio.</li><li><strong>Gesti√≥n y Consulta de Citas:</strong> Permite buscar y filtrar el historial completo de citas.</li><li><strong>Asistente de IA (Gemini):</strong> Integra un LLM para generar reportes, analizar datos con lenguaje natural y detectar oportunidades de negocio.</li></ul>`,
                'module-independent': `<h3 class="font-bold text-2xl mb-4 text-red-700">Aplicaci√≥n Web Independiente (PI_MOVIL2)</h3><p class="text-lg mb-4">Un proyecto <strong>autocontenido y aut√≥nomo</strong> desarrollado con <strong>Spring Boot (Java)</strong> para el backend y <strong>VanillaJS</strong> para el frontend. <strong>No se integra con la API Central.</strong></p><h4 class="font-semibold text-xl mb-2">Funcionalidades Principales:</h4><ul class="list-disc list-inside space-y-2 text-lg"><li><strong>Backend Propio:</strong> Implementa una API REST, l√≥gica y persistencia de datos de forma independiente.</li><li><strong>Portal del Cliente:</strong> Un formulario intuitivo para que los clientes reserven y gestionen sus citas.</li><li><strong>Portal del Barbero:</strong> Un panel para que los barberos inicien sesi√≥n por sede y visualicen su agenda de citas.</li></ul>`
            };
            const updateContent = (targetId) => contentContainer.innerHTML = tabContents[targetId];
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    updateContent(tab.getAttribute('data-target'));
                });
            });
            updateContent('module-api');
        }
    };

    app.init();
});
</script>

</body>
</html>