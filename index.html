<!DOCTYPE html>
<html lang="es" class="scroll-smooth">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Visor Interactivo | Proyecto Kingdom Barber</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --color-primary: #D4AF37;
            /* Oro */
            --color-primary-dark: #b39160;
            --color-bg: #f4f4f4;
            --color-text: #2d3748;
            --color-sidebar-bg: #1a202c;
            --color-sidebar-text: #ffffff;
            --font-display: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-body);
            background-color: var(--color-bg);
            color: var(--color-text);
        }

        .nav-link {
            transition: all .3s ease;
            position: relative;
        }

        .nav-link.active {
            background-color: var(--color-primary);
            color: var(--color-sidebar-bg);
            font-weight: 700;
        }

        .nav-link:not(.active):hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .content-section {
            display: none;
            animation: fadeIn .6s ease-in-out;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab.active {
            border-bottom: 3px solid var(--color-primary);
            color: #1a202c;
            font-weight: 600;
        }

        .flow-step {
            transition: all .3s ease-in-out;
            border-left-width: 4px;
            border-left-color: #e2e8f0;
        }

        .flow-step.active {
            background-color: white;
            transform: scale(1.02);
            box-shadow: 0 4px 20px rgba(0, 0, 0, .08);
            border-left-color: var(--color-primary);
        }

        .slides-container {
            position: relative;
            overflow: hidden;
            height: 600px;
        }

        .slide {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            transform: translateX(50px);
            z-index: 1;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            justify-content: center;
            opacity: 1;
            transform: translateX(0);
            z-index: 10;
        }

        .slide.exiting {
            transform: translateX(-50px);
            opacity: 0;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #e0e0e0;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--color-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--color-primary-dark);
        }

        .animated-crown {
            display: inline-block;
            animation: bounce-crown 2s infinite ease-in-out;
        }

        @keyframes bounce-crown {

            0%,
            100% {
                transform: translateY(0) rotate(0);
            }

            25% {
                transform: translateY(-5px) rotate(-5deg);
            }

            75% {
                transform: translateY(-3px) rotate(5deg);
            }
        }
        
        /* Estilos para el nuevo diagrama de arquitectura */
        .arch-diagram-line {
            position: absolute;
            height: 2px;
            background: repeating-linear-gradient(90deg, #a0aec0, #a0aec0 4px, transparent 4px, transparent 8px);
            animation: march 2s linear infinite;
        }

        @keyframes march {
            from { background-position-x: 0; }
            to { background-position-x: -16px; }
        }
    </style>
</head>

<body class="flex h-screen overflow-hidden">

    <!-- Sidebar / Header -->
    <header class="w-72 bg-sidebar-bg text-sidebar-text flex flex-col p-6 shadow-2xl flex-shrink-0">
        <div class="text-center mb-12">
            <h1 class="text-3xl font-bold text-amber-400" style="font-family: var(--font-display);">
                <span class="animated-crown mr-2">üëë</span>Kingdom Barber
            </h1>
            <p class="text-sm text-gray-400 mt-1">Visor Interactivo del Proyecto</p>
        </div>
        <nav id="main-nav" class="flex flex-col space-y-2" aria-label="Navegaci√≥n principal"></nav>
        
        <!-- Links de Despliegue en Sidebar -->
        <div class="mt-8 pt-4 border-t border-gray-700">
            <h3 class="text-sm font-semibold text-gray-400 uppercase tracking-wider mb-3">Enlaces de Despliegue</h3>
            <div class="flex flex-col space-y-2 text-sm">
                <a href="https://pi-web2-six.vercel.app/" target="_blank" class="text-gray-300 hover:text-white transition-colors duration-200">üåê Plataforma Web</a>
                <a href="https://kingdombarberdashboard.streamlit.app/" target="_blank" class="text-gray-300 hover:text-white transition-colors duration-200">üìä Panel de Gesti√≥n</a>
                <a href="https://pi-movil2-0.onrender.com/sedes" target="_blank" class="text-gray-300 hover:text-white transition-colors duration-200">üß† API Central (Test)</a>
            </div>
        </div>

        <div class="mt-auto text-center text-xs text-gray-500">
            <p class="font-semibold">Alejandro Urrego ‚Ä¢ Andr√©s Vallejo ‚Ä¢ Juan M. Rivera</p>
            <p class="mt-1">Instituci√≥n T√©cnica CESDE &copy; 2025</p>
        </div>
    </header>

    <!-- Contenido Principal -->
    <main id="main-content" class="flex-1 overflow-y-auto p-8 md:p-12"></main>

    <script>
        document.addEventListener('DOMContentLoaded', function () {

            const app = {
                elements: {
                    mainNav: document.getElementById('main-nav'),
                    mainContent: document.getElementById('main-content'),
                },

                // Data de las secciones para la navegaci√≥n y el contenido
                sectionsData: [
                    { id: 'overview', title: 'Visi√≥n General', icon: 'üè†', active: true },
                    { id: 'objectives', title: 'Objetivos', icon: 'üéØ' },
                    { id: 'slideshow', title: 'Presentaci√≥n Detallada', icon: 'üì∫' },
                    { id: 'architecture', title: 'Arquitectura y Tecnolog√≠as', icon: 'üíª' },
                    { id: 'data-flow', title: 'Flujo de Datos', icon: '‚ÜîÔ∏è' },
                    { id: 'deployment', title: 'Despliegue y Acceso', icon: 'üöÄ' },
                    { id: 'conclusions', title: 'Conclusiones', icon: 'üìú' },
                    { id: 'glossary', title: 'Glosario T√©cnico', icon: 'üìñ' }
                ],
                
                // Data para el carrusel de diapositivas
                slidesData: [
                    {
                        id: 'slide-1',
                        bgColor: 'bg-amber-50',
                        title: '1. El Problema: La Gesti√≥n Tradicional es Ineficiente',
                        content: `<p class="text-xl text-gray-700 mb-6">La gesti√≥n tradicional de barber√≠as enfrenta desaf√≠os en la era digital que limitan su crecimiento y no cumplen con las expectativas de los clientes modernos.</p><ul class="space-y-3 text-lg"><li class="flex items-start"><span class="mr-3 text-red-500">‚ùå</span><div><strong>Procesos Manuales:</strong> La dependencia de agendas en papel o llamadas aumenta el riesgo de errores y reduce la eficiencia.</div></li><li class="flex items-start"><span class="mr-3 text-red-500">‚ùå</span><div><strong>Comunicaci√≥n Ineficiente:</strong> Falta de canales directos para recordatorios, promociones y feedback del cliente.</div></li><li class="flex items-start"><span class="mr-3 text-red-500">‚ùå</span><div><strong>Carencia de Datos:</strong> Imposibilidad de analizar el rendimiento, identificar servicios populares o entender patrones de clientes.</div></li></ul><p class="text-xl text-gray-800 mt-8 p-4 bg-green-100 border-l-4 border-green-500 rounded-r-lg"><strong>Nuestra Soluci√≥n:</strong> Un ecosistema digital que transforma la gesti√≥n, enriquece la interacci√≥n y potencia el negocio con herramientas de an√°lisis de datos e IA.</p>`
                    },
                    {
                        id: 'slide-2',
                        bgColor: 'bg-white',
                        title: '2. La Soluci√≥n: Un Ecosistema con Cerebro √önico',
                        content: `<p class="text-xl text-gray-700 mb-8">El proyecto se basa en una arquitectura moderna, donde cada sistema es independiente pero se comunica a trav√©s de una API Central construida en Java.</p><div class="flex flex-col md:flex-row justify-around items-center space-y-6 md:space-y-0 md:space-x-6"><div class="text-center p-6 bg-blue-50 rounded-lg w-full md:w-1/3 shadow-sm"><span class="text-5xl">üåê</span><h4 class="font-bold mt-2 text-lg">Plataforma Web (Cliente)</h4><p class="text-sm text-gray-500">(Next.js)</p><p class="mt-2">Interfaz para que los clientes agenden citas y exploren servicios.</p></div><div class="text-5xl text-amber-500 font-light transform md:-rotate-90">‚Üë‚Üì</div><div class="text-center p-6 bg-amber-50 rounded-lg w-full md:w-1/3 shadow-lg border-2 border-amber-500"><span class="text-5xl">üß†</span><h4 class="font-bold mt-2 text-lg">API CENTRAL (El Cerebro)</h4><p class="text-sm text-gray-500">(Java + Spring Boot)</p><p class="mt-2">√önica fuente de verdad. Gestiona toda la l√≥gica de negocio y los datos.</p></div><div class="text-5xl text-amber-500 font-light transform md:-rotate-90">‚Üë‚Üì</div><div class="text-center p-6 bg-green-50 rounded-lg w-full md:w-1/3 shadow-sm"><span class="text-5xl">üìä</span><h4 class="font-bold mt-2 text-lg">Panel de Gesti√≥n (Admin)</h4><p class="text-sm text-gray-500">(Python + Streamlit)</p><p class="mt-2">Herramienta para an√°lisis de datos, visualizaci√≥n y asistente de IA.</p></div></div><p class="text-center mt-8 text-gray-600 text-lg">Esta separaci√≥n garantiza flexibilidad y mantenibilidad a largo plazo.</p>`
                    },
                    {
                        id: 'slide-3',
                        bgColor: 'bg-slate-50',
                        title: '3. M√≥dulo Clave: La API Central (Java + Spring Boot)',
                        content: `<p class="text-xl text-gray-700 mb-6">Es el <strong>coraz√≥n del sistema</strong>. Este componente robusto centraliza toda la l√≥gica de negocio y act√∫a como la √∫nica fuente de verdad para los datos.</p><ul class="space-y-4 text-lg text-gray-700"><li><strong class="text-amber-700">API RESTful:</strong> Expone endpoints para operaciones CRUD sobre todas las entidades: clientes, barberos, citas (activas e hist√≥ricas), servicios y galer√≠a.</li><li><strong class="text-amber-700">Persistencia de Datos:</strong> Utiliza <strong>Spring Data JPA y Hibernate</strong> para mapear objetos Java a una base de datos relacional (H2 para desarrollo), garantizando la integridad de los datos.</li><li><strong class="text-amber-700">Almacenamiento de Im√°genes:</strong> Implementa una estrategia moderna guardando las im√°genes como texto (Base64) directamente en la base de datos, eliminando la necesidad de gestionar un sistema de archivos.</li></ul><div class="mt-6 p-4 bg-gray-200 rounded-lg text-gray-800"><code class="text-sm"><strong>Arquitectura Robusta:</strong> Al estar construido sobre Spring Boot, se beneficia de la inyecci√≥n de dependencias, la gesti√≥n de transacciones y un ecosistema maduro ideal para aplicaciones empresariales.</code></div>`
                    },
                    {
                        id: 'slide-4',
                        bgColor: 'bg-blue-50',
                        title: '4. M√≥dulo Cliente: Plataforma Web (PI_WEB2)',
                        content: `<p class="text-xl text-gray-700 mb-6">Construido con <strong>Next.js (React + TypeScript)</strong>, es la cara visible del proyecto. <strong>Es un cliente puro que consume la API de Java.</strong></p><div class="grid grid-cols-1 md:grid-cols-2 gap-6 text-lg"><div><h4 class="font-semibold text-blue-700 mb-2">Para Clientes:</h4><ul class="list-disc list-inside space-y-2"><li>Sistema de reservas avanzado con calendario interactivo.</li><li>Exploraci√≥n de servicios y sedes.</li><li>Autenticaci√≥n segura con Clerk para gestionar perfil y citas.</li></ul></div><div><h4 class="font-semibold text-blue-700 mb-2">Para Barberos:</h4><ul class="list-disc list-inside space-y-2"><li>Dashboard para visualizar su agenda personal.</li><li>Galer√≠a para subir y gestionar un portafolio de trabajos.</li></ul></div></div><p class="mt-8 text-lg p-4 bg-blue-100 rounded-lg">El uso de <strong>TypeScript</strong> asegura un c√≥digo robusto, mientras que <strong>Tailwind CSS</strong> permite un dise√±o moderno y responsivo.</p>`
                    },
                    {
                        id: 'slide-5',
                        bgColor: 'bg-green-50',
                        title: '5. M√≥dulo de Inteligencia: Panel de Gesti√≥n (PI_NTP)',
                        content: `<p class="text-xl text-gray-700 mb-6">Una potente herramienta estrat√©gica desarrollada con <strong>Python y Streamlit</strong>, dise√±ada para que los administradores tomen decisiones basadas en datos. <strong>Consume la API de Java.</strong></p><ul class="space-y-4 text-lg"><li><strong class="text-green-700">Dashboard Interactivo:</strong> Ofrece KPIs (Ingresos, Citas) y filtros para analizar datos en tiempo real.</li><li><strong class="text-green-700">Gesti√≥n y Consulta:</strong> Permite consultar el historial completo de citas con filtros avanzados.</li><li><strong class="text-green-700">Asistente de IA (Gemini):</strong> El componente m√°s innovador, capaz de generar reportes en PDF, analizar datos usando lenguaje natural, crear textos para marketing y detectar oportunidades de negocio.</li></ul>`
                    }
                ],

                init() {
                    this.renderLayoutAndContent();
                    this.attachNavListeners();
                    this.initInteractiveComponents();
                },
                
                getSectionHTML(sectionId) {
                    const slidesHTML = this.slidesData.map((slide, index) => `
                        <div id="${slide.id}" class="slide p-8 md:p-12 ${slide.bgColor} rounded-xl ${index === 0 ? 'active' : ''}">
                            <h3 class="text-3xl font-bold mb-4 text-stone-800">${slide.title}</h3>
                            ${slide.content}
                        </div>`).join('');
                    
                    const glossaryTerms = [
                        { term: 'API RESTful', def: 'Un **estilo de arquitectura** de software para sistemas distribuidos, como la World Wide Web. Define un conjunto de restricciones para la creaci√≥n de servicios web que se comunican a trav√©s de HTTP, usando m√©todos est√°ndar (GET, POST, PUT, DELETE) para realizar operaciones CRUD sobre los recursos.' },
                        { term: 'App Router (Next.js)', def: 'La arquitectura de enrutamiento m√°s reciente de Next.js, basada en directorios dentro de la carpeta `/app`. Promueve la organizaci√≥n por funcionalidad y habilita caracter√≠sticas avanzadas como los Componentes de Servidor y Layouts anidados.' },
                        { term: 'Arquitectura de Servicios Desacoplados', def: 'Un principio de dise√±o de software que estructura una aplicaci√≥n como una colecci√≥n de servicios poco acoplados. En este proyecto, separa el Back-End (API) de los Front-Ends, permitiendo que cada componente se desarrolle, despliegue y escale de forma independiente.' },
                        { term: 'Asistente de Inteligencia Artificial', def: 'M√≥dulo de an√°lisis avanzado que utiliza un **Modelo de Lenguaje Grande (LLM)**, como Gemini, para procesar y comprender el lenguaje natural. Permite generar an√°lisis de datos, responder preguntas complejas y crear contenido de forma automatizada.' },
                        { term: 'Autenticaci√≥n de Usuarios', def: 'El proceso de verificar la identidad de un usuario para concederle acceso a recursos protegidos. En el proyecto, esta funcionalidad se delega a un servicio externo (Clerk) para mayor seguridad y para simplificar la gesti√≥n de sesiones y perfiles.' },
                        { term: 'Back-End', def: 'La parte de una aplicaci√≥n que se ejecuta en el servidor y es invisible para el usuario final. En este proyecto, corresponde a la **API Central (Java/Spring Boot)**, que maneja toda la l√≥gica de negocio, el procesamiento de datos y la comunicaci√≥n con la base de datos.' },
                        { term: 'Base64', def: 'Un m√©todo de codificaci√≥n que convierte datos binarios (como im√°genes) en una cadena de texto ASCII. Se adopt√≥ en la API para **almacenar contenido de im√°genes directamente en la base de datos**, eliminando la complejidad de gestionar un sistema de archivos y los problemas de CORS para recursos est√°ticos.' },
                        { term: 'Business Intelligence (BI)', def: 'El conjunto de estrategias, tecnolog√≠as y herramientas para el an√°lisis de datos de negocio. El **Panel de Gesti√≥n** es la herramienta de BI del proyecto, permitiendo la visualizaci√≥n de KPIs, el an√°lisis de datos hist√≥ricos y la toma de decisiones informadas.' },
                        { term: 'CI/CD (Integraci√≥n/Despliegue Continuo)', def: 'Una pr√°ctica de DevOps que automatiza el proceso de construcci√≥n, prueba y despliegue de c√≥digo. Las plataformas **Vercel, Render y Streamlit Cloud** implementan CI/CD para desplegar autom√°ticamente las nuevas versiones del software al actualizar el repositorio.' },
                        { term: 'Capa de Abstracci√≥n de Datos', def: 'Un componente de software que oculta los detalles t√©cnicos de la comunicaci√≥n con una fuente de datos. El m√≥dulo `data_manager.py` act√∫a como una capa de abstracci√≥n, simplificando las peticiones a la API y la conversi√≥n de JSON a DataFrames de Pandas.' },
                        { term: 'Capa de Persistencia', def: 'El conjunto de componentes de software (ej. Repositorios de Spring Data JPA) cuya responsabilidad es gestionar el almacenamiento y la recuperaci√≥n de datos de forma duradera en una base de datos.' },
                        { term: 'Clase Controladora (Controller)', def: 'En Spring Boot, una clase anotada con `@RestController` que maneja las peticiones HTTP entrantes. Mapea los endpoints (URLs) a m√©todos espec√≠ficos que ejecutan la l√≥gica de negocio y devuelven una respuesta.' },
                        { term: 'Clase Modelo (Model/Entity)', def: 'Una clase Java (`@Entity`) que representa la estructura de los datos del negocio (ej. una cita, un barbero). JPA la utiliza para mapear objetos a tablas en la base de datos relacional.' },
                        { term: 'Clerk', def: 'Un servicio de terceros para la **gesti√≥n de identidad y autenticaci√≥n de usuarios**. Simplifica la implementaci√≥n de login, registro, gesti√≥n de perfiles y protecci√≥n de rutas en aplicaciones web modernas como las de Next.js.' },
                        { term: 'Contenerizaci√≥n (Docker)', def: 'La pr√°ctica de empaquetar una aplicaci√≥n y todas sus dependencias en una unidad estandarizada para el desarrollo de software, llamada contenedor. **Docker** es la herramienta utilizada para contenerizar la API de Java, asegurando que se ejecute de manera consistente en cualquier entorno.' },
                        { term: 'Contrato de API', def: 'La especificaci√≥n formal y documentada de c√≥mo los clientes deben comunicarse con una API. Define los endpoints, m√©todos HTTP, par√°metros y la estructura de los datos (JSON) esperados. Es el **acuerdo funcional** entre el back-end y los front-ends.' },
                        { term: 'CORS (Cross-Origin Resource Sharing)', def: 'Un mecanismo de seguridad del navegador que restringe las peticiones HTTP realizadas desde un dominio a otro. Es crucial configurar CORS en el back-end para permitir que los front-ends (desplegados en Vercel y Streamlit Cloud) puedan comunicarse con la API (desplegada en Render).' },
                        { term: 'CRUD', def: 'Acr√≥nimo de **Create, Read, Update y Delete** (Crear, Leer, Actualizar, Borrar). Son las cuatro operaciones b√°sicas que se pueden realizar sobre los datos en una base de datos o a trav√©s de una API.' },
                        { term: 'Data Transfer Object (DTO)', def: 'Un patr√≥n de dise√±o para transferir datos entre las capas de una aplicaci√≥n. En la API de Java, se usa para desacoplar el modelo de la base de datos (Entidad) del modelo expuesto en la API, permitiendo personalizar la informaci√≥n que se env√≠a o recibe.' },
                        { term: 'DataFrame', def: 'La estructura de datos principal de la librer√≠a **Pandas** en Python. Es una tabla bidimensional, similar a una hoja de c√°lculo, que es fundamental para la manipulaci√≥n y el an√°lisis de datos en el Panel de Gesti√≥n.' },
                        { term: 'Endpoint', def: 'Una URL espec√≠fica en una API a la que una aplicaci√≥n cliente puede enviar una petici√≥n para interactuar con un recurso o ejecutar una operaci√≥n. Por ejemplo, `/citas-activas` es un endpoint para gestionar citas.' },
                        { term: 'ESLint', def: 'Una herramienta de an√°lisis est√°tico de c√≥digo para identificar y reportar patrones problem√°ticos en c√≥digo JavaScript/TypeScript. Se utiliza en el proceso de build de Vercel para asegurar la calidad y consistencia del c√≥digo del front-end.' },
                        { term: 'Fetch API', def: 'Una interfaz moderna y nativa de los navegadores web para realizar peticiones HTTP de forma as√≠ncrona. Es la herramienta est√°ndar utilizada en la aplicaci√≥n de Next.js para comunicarse con el back-end.' },
                        { term: 'FPDF2', def: 'Una librer√≠a de Python que permite la creaci√≥n y manipulaci√≥n de archivos PDF de forma program√°tica. Se utiliza en el Panel de Gesti√≥n para la funcionalidad de "Generador de Reportes" del Asistente de IA.' },
                        { term: 'Front-End (Cliente)', def: 'La parte de la aplicaci√≥n con la que el usuario interact√∫a directamente. En este proyecto, hay dos front-ends: la **plataforma web (Next.js)** para clientes y el **panel de gesti√≥n (Streamlit)** para administradores.' },
                        { term: 'Gemini', def: 'El **Modelo de Lenguaje Grande (LLM)** de Google, que potencia las capacidades del Asistente de IA en el Panel de Gesti√≥n para el an√°lisis de datos, la generaci√≥n de texto y la comprensi√≥n del lenguaje natural.' },
                        { term: 'H2 Database', def: 'Una base de datos relacional ligera, escrita en Java, que puede funcionar en memoria. Se utiliz√≥ como **base de datos para el entorno de desarrollo** de la API, facilitando una configuraci√≥n r√°pida y sin dependencias externas.' },
                        { term: 'Headless UI', def: 'Una librer√≠a de componentes de interfaz de usuario para React que proporciona la l√≥gica y la accesibilidad de componentes complejos (como modales o men√∫s desplegables) sin imponer ning√∫n estilo visual, ofreciendo m√°xima flexibilidad en el dise√±o.' },
                        { term: 'Hibernate', def: 'Un framework de **mapeo objeto-relacional (ORM)** para Java. Es la implementaci√≥n subyacente que utiliza Spring Data JPA para convertir las operaciones sobre objetos Java en sentencias SQL ejecutables por la base de datos.' },
                        { term: 'JSON (JavaScript Object Notation)', def: 'Un formato de texto ligero para el intercambio de datos. Es el est√°ndar de facto para la comunicaci√≥n entre servidores y clientes web, utilizado por la API de Java para enviar y recibir informaci√≥n.' },
                        { term: 'JpaRepository', def: 'Una interfaz de Spring Data JPA que, al ser extendida, proporciona autom√°ticamente un conjunto completo de m√©todos CRUD para una entidad espec√≠fica, reduciendo dr√°sticamente la cantidad de c√≥digo repetitivo necesario para el acceso a datos.' },
                        { term: 'Lombok', def: 'Una librer√≠a de Java que se conecta al proceso de compilaci√≥n para generar autom√°ticamente c√≥digo repetitivo como *getters*, *setters*, constructores y m√°s, a trav√©s de anotaciones. Esto mantiene las clases modelo limpias y legibles.' },
                        { term: 'Lucide-react', def: 'Una librer√≠a de iconos SVG de c√≥digo abierto, ligeros y personalizables, empaquetados como componentes de React. Se utiliza en la plataforma web para proporcionar una iconograf√≠a clara y consistente.' },
                        { term: 'Maven', def: 'Una herramienta de automatizaci√≥n de construcci√≥n y **gesti√≥n de dependencias** para proyectos Java. Se utiliza para definir las librer√≠as necesarias (como Spring Boot, JPA, etc.) y compilar el proyecto en un archivo ejecutable.' },
                        { term: 'middleware (Next.js)', def: 'Un fragmento de c√≥digo que se ejecuta antes de que una petici√≥n sea completada en el servidor. En Next.js, se utiliza para interceptar peticiones a rutas espec√≠ficas, ideal para implementar l√≥gica de autenticaci√≥n y proteger rutas.' },
                        { term: 'Next.js', def: 'Un framework de **React** para construir aplicaciones web de producci√≥n. A√±ade funcionalidades clave sobre React, como el enrutamiento basado en archivos (App Router), renderizado en el servidor (SSR) y optimizaci√≥n de rendimiento.' },
                        { term: 'Pandas', def: 'Una biblioteca de **Python** esencial para la ciencia de datos. Proporciona estructuras de datos de alto rendimiento, como el DataFrame, y herramientas para el an√°lisis, limpieza y manipulaci√≥n de datos.' },
                        { term: 'PostgreSQL', def: 'Un potente sistema de base de datos relacional de c√≥digo abierto, conocido por su robustez, escalabilidad y cumplimiento de los est√°ndares SQL. Es la **base de datos utilizada en el entorno de producci√≥n** para la API desplegada en Render.' },
                        { term: 'Render', def: 'Una plataforma en la nube (PaaS) que simplifica el despliegue y alojamiento de aplicaciones web, APIs y bases de datos. Se utiliza para **desplegar la API Central de Java** a trav√©s de su contenedor Docker.' },
                        { term: 'Requests (Librer√≠a Python)', def: 'La librer√≠a est√°ndar de facto en Python para realizar peticiones HTTP. Es utilizada en el Panel de Gesti√≥n para comunicarse con la API de Java y obtener los datos necesarios para los an√°lisis.' },
                        { term: 'Secrets Management', def: 'La pr√°ctica de gestionar de forma segura informaci√≥n sensible como claves de API y credenciales de bases de datos. Se implementa a trav√©s de **variables de entorno** en las plataformas de despliegue (Render, Vercel) y el archivo `secrets.toml` en Streamlit.' },
                        { term: 'Spring Boot', def: 'Un framework del ecosistema de Spring que simplifica radicalmente la creaci√≥n de aplicaciones Java aut√≥nomas y de grado de producci√≥n. Proporciona un servidor web embebido y autoconfiguraci√≥n, acelerando el desarrollo de APIs RESTful.' },
                        { term: 'Spring Data JPA', def: 'Un subproyecto de Spring que facilita la implementaci√≥n de la capa de acceso a datos en aplicaciones Java. Reduce la necesidad de escribir c√≥digo repetitivo para las operaciones de base de datos mediante el patr√≥n de Repositorio.' },
                        { term: 'Streamlit', def: 'Un framework de **Python** de c√≥digo abierto que permite crear y compartir aplicaciones web para ciencia de datos y machine learning de forma r√°pida y sencilla. Es la tecnolog√≠a base del Panel de Gesti√≥n.' },
                        { term: 'Streamlit Cloud', def: 'La plataforma oficial para desplegar, gestionar y compartir aplicaciones de Streamlit. Se utiliza para alojar y hacer accesible p√∫blicamente el Panel de Gesti√≥n del proyecto.' },
                        { term: 'Tailwind CSS', def: 'Un framework de CSS de tipo "**utility-first**" que permite construir dise√±os complejos directamente en el HTML mediante clases de utilidad, en lugar de escribir CSS personalizado. Acelera el desarrollo de interfaces de usuario modernas y responsivas.' },
                        { term: 'TypeScript', def: 'Un superconjunto de JavaScript que a√±ade tipado est√°tico opcional. Se utiliz√≥ en el front-end de Next.js para mejorar la robustez del c√≥digo, facilitar el mantenimiento y detectar errores en tiempo de desarrollo.' },
                        { term: '√önica Fuente de Verdad (Single Source of Truth)', def: 'Un principio arquitect√≥nico clave del proyecto, donde la **API Central es la √∫nica entidad** responsable de la l√≥gica y la persistencia de los datos. Esto garantiza la consistencia y la integridad de la informaci√≥n en todo el ecosistema.' },
                        { term: 'Vercel', def: 'Una plataforma en la nube optimizada para el despliegue de **aplicaciones front-end y serverless**, especialmente las construidas con Next.js. Se utiliza para alojar la plataforma web de cara al cliente.' }
                    ].sort((a, b) => a.term.localeCompare(b.term));
                    
                    const glossaryHTML = glossaryTerms.map(item => `<div class="border-b border-gray-200 pb-4 mb-4"><h3 class="font-bold text-xl text-amber-700">${item.term}</h3><p class="text-gray-600">${item.def}</p></div>`).join('');

                    const contentMap = {
                        overview: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Visi√≥n General del Proyecto</h2><div class="bg-white p-8 rounded-2xl shadow-lg space-y-8"><div><h3 class="text-2xl font-semibold mb-3 text-amber-600">1. Resumen del Proyecto</h3><p class="text-lg leading-relaxed text-gray-700"><strong>Kingdom Barber</strong> nace como una <strong>plataforma digital integral</strong>, dise√±ada para transformar y modernizar la gesti√≥n de barber√≠as. Su objetivo es ofrecer una soluci√≥n robusta que simplifique la administraci√≥n de citas, enriquezca la interacci√≥n con el cliente y proporcione herramientas avanzadas para la toma de decisiones estrat√©gicas.</p></div><div class="border-t pt-8"><h3 class="text-2xl font-semibold mb-3 text-amber-600">2. Planteamiento del Problema</h3><p class="text-lg leading-relaxed text-gray-700">La gesti√≥n tradicional de barber√≠as enfrenta desaf√≠os en la era digital, como la dependencia de procesos manuales, una comunicaci√≥n ineficiente y la falta de an√°lisis de datos. Esto resulta en una menor eficiencia operativa y una experiencia que no cumple con las expectativas actuales de los clientes, quienes buscan <strong>comodidad, seguridad y personalizaci√≥n</strong>.</p></div><div class="border-t pt-8"><h3 class="text-2xl font-semibold mb-4 text-amber-600">3. Soluci√≥n Propuesta</h3><p class="text-lg leading-relaxed text-gray-700">Kingdom Barber aborda estos desaf√≠os mediante un <strong>ecosistema de aplicaciones</strong> que funcionan de manera sin√©rgica: una <strong>API Central (Java + Spring Boot)</strong> que act√∫a como el cerebro, una <strong>Plataforma Web para clientes (Next.js)</strong> y un <strong>Panel de Gesti√≥n y An√°lisis (Python/Streamlit)</strong>. Esta soluci√≥n empodera a los due√±os del negocio con herramientas de an√°lisis de datos e IA.</p></div></div>`,
                        slideshow: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Presentaci√≥n Detallada del Proyecto</h2><div class="bg-white p-6 rounded-2xl shadow-lg"><div class="slides-container" aria-live="polite">${slidesHTML}</div><div class="flex justify-between items-center mt-6"><button id="slideshow-prev" class="bg-stone-800 text-white px-5 py-2 rounded-lg hover:bg-black transition disabled:opacity-50" aria-label="Diapositiva anterior">&larr; Anterior</button><span id="slideshow-counter" class="font-semibold text-lg text-gray-700">Diapositiva 1 de ${this.slidesData.length}</span><button id="slideshow-next" class="bg-amber-500 text-white px-5 py-2 rounded-lg hover:bg-amber-600 transition" aria-label="Siguiente diapositiva">Siguiente &rarr;</button></div></div>`,
                        // CONTENIDO MEJORADO PARA LA SECCI√ìN DE ARQUITECTURA
                        architecture: `
                            <h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Arquitectura y Tecnolog√≠as</h2>
                            <div class="bg-white p-8 rounded-2xl shadow-lg">
                                <p class="text-lg mb-8 text-gray-700 leading-relaxed">El proyecto est√° dise√±ado bajo una <strong>arquitectura de servicios desacoplados</strong>, donde cada componente tiene una responsabilidad √∫nica. El n√∫cleo del sistema es la API Central de Java, que centraliza toda la l√≥gica de negocio y los datos, sirviendo a m√∫ltiples clientes frontend de forma independiente.</p>
                                
                                <div class="mb-10 p-6 bg-gray-50 rounded-lg border border-gray-200">
                                    <h3 class="text-xl font-semibold text-center mb-6 text-gray-800">Diagrama de la Arquitectura Desacoplada</h3>
                                    <div class="relative flex items-center justify-center py-10">
                                        
                                        <!-- Clientes Frontend -->
                                        <div class="flex flex-col space-y-12">
                                            <div class="bg-gradient-to-br from-blue-100 to-white border-2 border-blue-200 rounded-xl p-6 text-center shadow-lg transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl w-64">
                                                <div class="text-4xl mb-3">üåê</div>
                                                <h4 class="text-xl font-bold text-blue-800">Plataforma Web</h4>
                                                <p class="text-blue-600 font-semibold">(Next.js / React)</p>
                                            </div>
                                            <div class="bg-gradient-to-br from-green-100 to-white border-2 border-green-200 rounded-xl p-6 text-center shadow-lg transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl w-64">
                                                <div class="text-4xl mb-3">üìä</div>
                                                <h4 class="text-xl font-bold text-green-800">Panel de Gesti√≥n</h4>
                                                <p class="text-green-600 font-semibold">(Python / Streamlit)</p>
                                            </div>
                                        </div>

                                        <!-- L√≠neas de comunicaci√≥n -->
                                        <div class="absolute left-64 top-24 w-24">
                                             <div class="arch-diagram-line w-full"></div>
                                             <div class="absolute -right-2 -top-2 text-gray-500 text-3xl">‚Ä∫</div>
                                             <div class="absolute left-4 -top-6 text-gray-600 text-sm font-semibold">Peticiones HTTP</div>
                                        </div>
                                         <div class="absolute left-64 bottom-24 w-24">
                                             <div class="arch-diagram-line w-full"></div>
                                             <div class="absolute -right-2 -top-2 text-gray-500 text-3xl">‚Ä∫</div>
                                             <div class="absolute left-6 top-4 text-gray-600 text-sm font-semibold">Consume API</div>
                                        </div>

                                        <!-- API Central -->
                                        <div class="ml-24 bg-gradient-to-br from-gray-800 to-black border-2 border-amber-400 rounded-xl p-8 text-center shadow-2xl flex flex-col justify-center items-center w-72 h-72 transform transition-transform duration-300 hover:scale-105">
                                            <div class="text-5xl mb-4">üß†</div>
                                            <h4 class="text-2xl font-bold text-white">API Central</h4>
                                            <p class="text-amber-400 font-semibold mb-3">(Java / Spring Boot)</p>
                                            <span class="bg-amber-400 text-black text-xs font-bold px-3 py-1 rounded-full">√öNICA FUENTE DE VERDAD</span>
                                        </div>
                                    </div>
                                </div>

                                <div id="tabs" class="flex border-b border-gray-200 mb-6" role="tablist" aria-label="M√≥dulos">
                                    <button class="tab py-3 px-6 text-gray-500 focus:outline-none text-lg active" data-target="module-api" role="tab" aria-selected="true">üß† API Central (Java)</button>
                                    <button class="tab py-3 px-6 text-gray-500 focus:outline-none text-lg" data-target="module-web" role="tab" aria-selected="false">üåê Plataforma Web (Next.js)</button>
                                    <button class="tab py-3 px-6 text-gray-500 focus:outline-none text-lg" data-target="module-dashboard" role="tab" aria-selected="false">üìä Panel de Gesti√≥n (Python)</button>
                                </div>
                                <div id="tab-content" aria-live="polite" class="min-h-[400px]"></div>
                            </div>`,
                        'data-flow': `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Flujo de Datos: Creaci√≥n de una Cita</h2><div class="bg-white p-8 rounded-2xl shadow-lg"><p class="text-lg mb-6 text-gray-700">Este es un ejemplo del flujo de datos cliente-servidor al agendar una cita en el nuevo ecosistema. Navega paso a paso para ver c√≥mo los componentes interact√∫an a trav√©s de la API Central.</p><div class="flex justify-between items-center mb-8"><button id="prev-step" class="bg-stone-800 text-white px-5 py-2 rounded-lg hover:bg-black transition disabled:opacity-50"> &larr; Anterior</button><span id="step-counter" class="font-semibold text-lg text-gray-700"></span><button id="next-step" class="bg-amber-500 text-white px-5 py-2 rounded-lg hover:bg-amber-600 transition">Siguiente &rarr;</button></div><div id="flow-steps-container" class="space-y-4"></div></div>`,
                        objectives: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Objetivos del Proyecto</h2><div class="bg-white p-8 rounded-2xl shadow-lg mb-8"><h3 class="font-semibold text-2xl mb-3 text-amber-600">Objetivo General</h3><p class="text-lg leading-relaxed">Desarrollar un ecosistema de software completo y desacoplado que modernice la gesti√≥n operativa de Kingdom Barber, mejore la experiencia del cliente a trav√©s de una plataforma web intuitiva y proporcione herramientas de inteligencia de negocios para la toma de decisiones estrat√©gicas basadas en datos.</p></div><div class="bg-white p-8 rounded-2xl shadow-lg"><h3 class="font-semibold text-2xl mb-6 text-amber-600">Objetivos Espec√≠ficos</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6"><div class="flex items-start"><span class="mr-4 text-2xl text-amber-500">üß†</span><div><strong class="block text-gray-800 text-lg">Centralizar la L√≥gica de Negocio:</strong> Construir una API RESTful en Java con Spring Boot que act√∫e como la √∫nica fuente de verdad para todos los datos.</div></div><div class="flex items-start"><span class="mr-4 text-2xl text-amber-500">üåê</span><div><strong class="block text-gray-800 text-lg">Ofrecer una Experiencia Moderna:</strong> Desarrollar una aplicaci√≥n web cliente (PI_WEB2) con Next.js que permita agendar citas en un calendario interactivo.</div></div><div class="flex items-start"><span class="mr-4 text-2xl text-amber-500">üìä</span><div><strong class="block text-gray-800 text-lg">Empoderar la Gesti√≥n con Datos:</strong> Crear un panel de administraci√≥n (PI_NTP) en Python con Streamlit que ofrezca dashboards interactivos y KPIs en tiempo real.</div></div><div class="flex items-start"><span class="mr-4 text-2xl text-amber-500">ü§ñ</span><div><strong class="block text-gray-800 text-lg">Integrar Inteligencia Artificial:</strong> Implementar un Asistente de IA (Gemini) en el panel de gesti√≥n para generar an√°lisis y proponer estrategias.</div></div></div></div>`,
                        conclusions: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Conclusiones y Lecciones Aprendidas</h2><div class="bg-white p-8 rounded-2xl shadow-lg space-y-6 text-lg text-gray-700"><p>La decisi√≥n de migrar y consolidar el ecosistema bajo una <strong>√∫nica API Central en Java</strong> ha sido el paso m√°s importante hacia la creaci√≥n de una soluci√≥n tecnol√≥gica robusta, escalable y profesional. El proyecto ha concluido exitosamente, cumpliendo con los objetivos de modernizaci√≥n y sentando una base s√≥lida para el futuro.</p><div class="space-y-4"><div class="p-6 bg-gray-50 rounded-lg border-l-4 border-amber-400"><h4 class="font-bold text-gray-800 mb-2">Desaf√≠os de Integraci√≥n Multi-Tecnol√≥gica</h4><p>La principal dificultad fue asegurar una comunicaci√≥n fluida entre el back-end de Java y los front-ends de React y Python. Se superaron obst√°culos como la configuraci√≥n de CORS, el manejo de inconsistencias en los formatos de datos (ej. \`camelCase\` vs. \`Pascal_Case\`), y la depuraci√≥n de errores de red a trav√©s de diferentes stacks. Esto reforz√≥ la importancia de establecer un "contrato de API" claro y estable desde el inicio.</p></div><div class="p-6 bg-gray-50 rounded-lg border-l-4 border-amber-400"><h4 class="font-bold text-gray-800 mb-2">Lecciones sobre la Persistencia y Manejo de Archivos</h4><p>La transici√≥n de archivos planos (\`.json\`) a un modelo de persistencia con JPA/Hibernate fue un reto conceptual clave. Adicionalmente, el plan inicial de servir im√°genes desde una carpeta en Spring Boot se encontr√≥ con problemas de configuraci√≥n inesperados (\`400 Bad Request\`). Esto llev√≥ a un <strong>replanteamiento estrat√©gico</strong> hacia una soluci√≥n m√°s robusta y moderna: convertir las im√°genes a formato Base64, eliminando por completo los problemas de rutas y simplificando la arquitectura.</p></div><div class="p-6 bg-gray-50 rounded-lg border-l-4 border-amber-400"><h4 class="font-bold text-gray-800 mb-2">Comunicaci√≥n y Sincronizaci√≥n del Equipo</h4><p>Al tener tres proyectos interconectados, la coordinaci√≥n fue fundamental. Cualquier cambio en la API de Java ten√≠a un impacto directo en los dos proyectos front-end. Esto subray√≥ la necesidad de una comunicaci√≥n constante, un control de versiones riguroso y la realizaci√≥n de pruebas de integraci√≥n continuas para evitar bloqueos y asegurar que el trabajo en paralelo fuera eficiente.</p></div></div><p class="pt-6 border-t border-gray-200 mt-6 font-semibold text-gray-800">En conclusi√≥n, el proyecto no solo ha entregado un ecosistema tecnol√≥gico funcional, sino que tambi√©n ha servido como una valiosa experiencia en la gesti√≥n de un proyecto de software complejo y multi-tecnol√≥gico, demostrando un dominio de arquitecturas de software contempor√°neas y pr√°cticas de desarrollo √°giles.</p></div>`,
                        deployment: `
                            <h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Despliegue y Acceso a las Plataformas</h2>
                            <div class="bg-white p-8 rounded-2xl shadow-lg">
                                <p class="text-lg leading-relaxed text-gray-700 mb-8">El ecosistema de Kingdom Barber est√° compuesto por tres aplicaciones independientes, cada una desplegada en una plataforma optimizada para su tecnolog√≠a. A continuaci√≥n, se detallan los enlaces para acceder a cada componente del proyecto.</p>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="border border-gray-200 rounded-xl p-6 flex flex-col hover:shadow-xl hover:border-blue-400 transition-all duration-300">
                                        <div class="text-4xl mb-3">üåê</div>
                                        <h3 class="text-2xl font-bold text-blue-800">Plataforma Web</h3>
                                        <p class="text-gray-500 mb-3 text-sm">Desplegado en Vercel</p>
                                        <p class="text-gray-600 mb-4 flex-grow">Interfaz para clientes y barberos, construida con <strong>Next.js y React</strong>. Permite el agendamiento de citas y la gesti√≥n de galer√≠as.</p>
                                        <a href="https://pi-web2-six.vercel.app/" target="_blank" class="mt-auto bg-blue-600 text-white text-center font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">Acceder a la Web</a>
                                    </div>
                                    <div class="border border-gray-200 rounded-xl p-6 flex flex-col hover:shadow-xl hover:border-green-400 transition-all duration-300">
                                        <div class="text-4xl mb-3">üìä</div>
                                        <h3 class="text-2xl font-bold text-green-800">Panel de Gesti√≥n</h3>
                                        <p class="text-gray-500 mb-3 text-sm">Desplegado en Streamlit Cloud</p>
                                        <p class="text-gray-600 mb-4 flex-grow">Herramienta de BI con <strong>Python y Streamlit</strong> para an√°lisis de datos, KPIs y el asistente de Inteligencia Artificial.</p>
                                        <a href="https://kingdombarberdashboard.streamlit.app/" target="_blank" class="mt-auto bg-green-600 text-white text-center font-bold py-2 px-4 rounded-lg hover:bg-green-700 transition-colors">Ir al Dashboard</a>
                                    </div>
                                    <div class="border border-gray-200 rounded-xl p-6 flex flex-col hover:shadow-xl hover:border-gray-400 transition-all duration-300">
                                        <div class="text-4xl mb-3">üß†</div>
                                        <h3 class="text-2xl font-bold text-gray-800">API Central</h3>
                                        <p class="text-gray-500 mb-3 text-sm">Desplegado en Render</p>
                                        <p class="text-gray-600 mb-4 flex-grow">El cerebro del sistema en <strong>Java y Spring Boot</strong>. Provee los datos a todas las aplicaciones. El link lleva a un endpoint de prueba.</p>
                                        <a href="https://pi-movil2-0.onrender.com/sedes" target="_blank" class="mt-auto bg-gray-700 text-white text-center font-bold py-2 px-4 rounded-lg hover:bg-gray-800 transition-colors">Probar API</a>
                                    </div>
                                </div>
                            </div>`,
                        glossary: `<h2 class="text-4xl font-bold mb-6" style="font-family: var(--font-display);">Glosario T√©cnico Extendido</h2><div class="bg-white p-8 rounded-2xl shadow-lg"><div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6 text-lg">${glossaryHTML}</div></div>`
                    };
                    return contentMap[sectionId] || '';
                },

                renderLayoutAndContent() {
                    this.elements.mainNav.innerHTML = '';
                    this.elements.mainContent.innerHTML = '';
                    this.sectionsData.forEach(section => {
                        const navLink = document.createElement('a');
                        navLink.href = `#${section.id}`;
                        navLink.className = `nav-link px-4 py-3 rounded-lg text-left text-base ${section.active ? 'active' : ''}`;
                        navLink.innerHTML = `<span class="mr-3 text-lg">${section.icon}</span>${section.title}`;
                        this.elements.mainNav.appendChild(navLink);

                        const sectionContainer = document.createElement('section');
                        sectionContainer.id = section.id;
                        sectionContainer.className = `content-section ${section.active ? 'active' : ''}`;
                        sectionContainer.innerHTML = this.getSectionHTML(section.id);
                        this.elements.mainContent.appendChild(sectionContainer);
                    });
                },

                attachNavListeners() {
                    this.elements.mainNav.querySelectorAll('.nav-link').forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            const targetId = link.getAttribute('href').substring(1);
                            this.elements.mainNav.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                            link.classList.add('active');
                            this.elements.mainContent.querySelectorAll('.content-section').forEach(section => {
                                section.classList.toggle('active', section.id === targetId);
                            });
                            this.elements.mainContent.scrollTop = 0;
                        });
                    });
                },
                
                initInteractiveComponents() {
                    this.initSlideshow();
                    this.initDataFlow();
                    this.initModulesTabs();
                },

                initSlideshow() {
                    const container = document.getElementById('slideshow');
                    if (!container) return;
                    let currentIndex = 0;
                    const slides = container.querySelectorAll('.slide');
                    const prevBtn = container.querySelector('#slideshow-prev');
                    const nextBtn = container.querySelector('#slideshow-next');
                    const counter = container.querySelector('#slideshow-counter');
                    if (!slides.length || !prevBtn || !nextBtn || !counter) return;

                    const updateButtons = () => {
                        prevBtn.disabled = currentIndex === 0;
                        nextBtn.disabled = currentIndex === slides.length - 1;
                    };

                    const showSlide = (index) => {
                        const currentSlide = slides[currentIndex];
                        const nextSlide = slides[index];
                        if (currentSlide) {
                            currentSlide.classList.add('exiting');
                            currentSlide.addEventListener('transitionend', () => {
                                currentSlide.classList.remove('active', 'exiting');
                            }, { once: true });
                        }
                        if (nextSlide) nextSlide.classList.add('active');
                        currentIndex = index;
                        counter.textContent = `Diapositiva ${currentIndex + 1} de ${slides.length}`;
                        updateButtons();
                    };
                    prevBtn.addEventListener('click', () => currentIndex > 0 && showSlide(currentIndex - 1));
                    nextBtn.addEventListener('click', () => currentIndex < slides.length - 1 && showSlide(currentIndex + 1));
                    updateButtons();
                },
                
                initDataFlow() {
                    const container = document.getElementById('data-flow');
                    if (!container) return;
                    let currentStep = 0;
                    const steps = [
                        { title: '1. Cliente (Front-End - PI_WEB2)', desc: 'Un usuario rellena el formulario de agendamiento en la interfaz de Next.js. El componente React empaqueta los datos en un objeto JSON.' },
                        { title: '2. Petici√≥n HTTP (POST)', desc: 'El front-end env√≠a una petici√≥n POST al endpoint <code>/citas-activas</code> de la API de Java (<code>https://pi-movil2-0.onrender.com</code>) usando la Fetch API.' },
                        { title: '3. Controlador (API Java)', desc: 'La clase <code>AgendamientoController</code> en Spring Boot recibe la petici√≥n. Spring convierte autom√°ticamente el JSON en un objeto Java <code>NuevaCita</code>.' },
                        { title: '4. L√≥gica y Persistencia (JPA)', desc: 'El controlador enriquece los datos (ej. a√±ade el nombre de la sede) y llama a <code>nuevaCitaRepository.save()</code>. Spring Data JPA genera la sentencia SQL <code>INSERT</code>.' },
                        { title: '5. Base de Datos (PostgreSQL)', desc: 'La nueva cita se guarda como una nueva fila en la tabla de la base de datos de producci√≥n en Render.' },
                        { title: '6. Respuesta de la API', desc: 'La API devuelve el objeto de la cita reci√©n guardada como un JSON al front-end, con un c√≥digo de estado <code>200 OK</code>.' },
                        { title: '7. Actualizaci√≥n de UI (React)', desc: 'El front-end recibe la confirmaci√≥n, actualiza su estado interno y la interfaz se re-renderiza para mostrar la cita reci√©n agendada en el calendario.' }
                    ];
                    const stepsContainer = container.querySelector('#flow-steps-container');
                    const prevBtn = container.querySelector('#prev-step');
                    const nextBtn = container.querySelector('#next-step');
                    const counter = container.querySelector('#step-counter');
                    if (!stepsContainer || !prevBtn || !nextBtn || !counter) return;

                    stepsContainer.innerHTML = ''; 
                    steps.forEach((step) => {
                        stepsContainer.innerHTML += `<div class="flow-step p-6 rounded-lg bg-gray-50 border-l-4"><h3 class="font-bold text-xl mb-2">${step.title}</h3><p class="text-gray-600 text-lg">${step.desc}</p></div>`;
                    });

                    const stepElements = stepsContainer.querySelectorAll('.flow-step');
                    const updateView = () => {
                        stepElements.forEach((el, index) => el.classList.toggle('active', index === currentStep));
                        prevBtn.disabled = currentStep === 0;
                        nextBtn.disabled = currentStep === steps.length - 1;
                        counter.textContent = `Paso ${currentStep + 1} de ${steps.length}`;
                    };
                    prevBtn.addEventListener('click', () => { if (currentStep > 0) { currentStep--; updateView(); } });
                    nextBtn.addEventListener('click', () => { if (currentStep < steps.length - 1) { currentStep++; updateView(); } });
                    updateView();
                },
                
                initModulesTabs() {
                    const container = document.getElementById('architecture');
                    if (!container) return;
                    const tabs = container.querySelectorAll('.tab');
                    const contentContainer = container.querySelector('#tab-content');
                    if (!tabs.length || !contentContainer) return;

                    const tabContents = {
                        'module-api': `<div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="md:col-span-2"><h3 class="font-bold text-2xl mb-4 text-amber-700">API Central (Java + Spring Boot)</h3><p class="text-lg mb-4">Es el coraz√≥n y cerebro del sistema. Gestiona toda la l√≥gica, los datos y la seguridad a trav√©s de una API RESTful.</p><h4 class="font-semibold text-xl mb-2">Funcionalidades Principales:</h4><ul class="list-disc list-inside space-y-2 text-lg"><li>Endpoints RESTful para el CRUD de todas las entidades.</li><li>L√≥gica de negocio para enriquecer datos antes de guardarlos.</li><li>Almacenamiento de im√°genes como Base64 en la base de datos.</li><li>Configuraci√≥n de CORS para comunicaci√≥n segura.</li></ul></div><div class="bg-amber-50 p-4 rounded-lg"><h4 class="font-semibold text-xl mb-2 text-amber-800">Stack Tecnol√≥gico</h4><ul class="list-disc list-inside space-y-2"><li><strong>Lenguaje:</strong> Java 17+</li><li><strong>Framework:</strong> Spring Boot</li><li><strong>Persistencia:</strong> Spring Data JPA, Hibernate</li><li><strong>Base de Datos:</strong> PostgreSQL (Producci√≥n)</li><li><strong>Build Tool:</strong> Maven</li><li><strong>Contenerizaci√≥n:</strong> Docker</li></ul></div></div>`,
                        'module-web': `<div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="md:col-span-2"><h3 class="font-bold text-2xl mb-4 text-blue-700">Plataforma Web (Next.js)</h3><p class="text-lg mb-4">La cara visible del proyecto, construida con <strong>Next.js, React y TypeScript</strong> para una experiencia de usuario excepcional. Consume la API de Java para todas sus operaciones.</p><h4 class="font-semibold text-xl mb-2">Funcionalidades Principales:</h4><ul class="list-disc list-inside space-y-2 text-lg"><li>Sistema de Reservas avanzado con calendario interactivo.</li><li>Galer√≠a de trabajos con subida y edici√≥n de im√°genes.</li><li>Panel para Barberos donde visualizan su agenda.</li><li>Autenticaci√≥n de usuarios con Clerk.</li></ul></div><div class="bg-blue-50 p-4 rounded-lg"><h4 class="font-semibold text-xl mb-2 text-blue-800">Stack Tecnol√≥gico</h4><ul class="list-disc list-inside space-y-2"><li><strong>Framework:</strong> Next.js, React</li><li><strong>Lenguaje:</strong> TypeScript</li><li><strong>Estilos:</strong> Tailwind CSS</li><li><strong>Autenticaci√≥n:</strong> Clerk</li><li><strong>Componentes:</strong> React Big Calendar, Headless UI</li></ul></div></div>`,
                        'module-dashboard': `<div class="grid grid-cols-1 md:grid-cols-3 gap-6"><div class="md:col-span-2"><h3 class="font-bold text-2xl mb-4 text-green-700">Panel de Gesti√≥n (Python + Streamlit)</h3><p class="text-lg mb-4">Herramienta estrat√©gica en <strong>Python con Streamlit</strong>, dise√±ada para el an√°lisis de datos y la administraci√≥n. Consume la API de Java.</p><h4 class="font-semibold text-xl mb-2">Funcionalidades Principales:</h4><ul class="list-disc list-inside space-y-2 text-lg"><li>Dashboard interactivo con KPIs y filtros en tiempo real.</li><li>Gesti√≥n y consulta del historial completo de citas.</li><li>Asistente de IA (Gemini) para generar reportes, chatear con los datos y crear estrategias de marketing.</li></ul></div><div class="bg-green-50 p-4 rounded-lg"><h4 class="font-semibold text-xl mb-2 text-green-800">Stack Tecnol√≥gico</h4><ul class="list-disc list-inside space-y-2"><li><strong>Framework:</strong> Streamlit</li><li><strong>Lenguaje:</strong> Python</li><li><strong>An√°lisis:</strong> Pandas</li><li><strong>Visualizaci√≥n:</strong> Plotly Express</li><li><strong>Reportes:</strong> FPDF2</li><li><strong>IA:</strong> Google Generative AI</li></ul></div></div>`
                    };
                    const updateContent = (targetId) => contentContainer.innerHTML = tabContents[targetId];
                    tabs.forEach(tab => {
                        tab.addEventListener('click', () => {
                            tabs.forEach(t => t.classList.remove('active'));
                            tab.classList.add('active');
                            updateContent(tab.getAttribute('data-target'));
                        });
                    });
                    updateContent('module-api');
                }
            };

            app.init();
        });
    </script>

</body>

</html>

